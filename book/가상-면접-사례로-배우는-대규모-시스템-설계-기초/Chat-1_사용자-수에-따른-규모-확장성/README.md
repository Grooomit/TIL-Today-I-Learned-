# 1. 사용자 수에 따른 규모 확장성
<!-- TOC -->

- [사용자 수에 따른 규모 확장성](#%EC%82%AC%EC%9A%A9%EC%9E%90-%EC%88%98%EC%97%90-%EB%94%B0%EB%A5%B8-%EA%B7%9C%EB%AA%A8-%ED%99%95%EC%9E%A5%EC%84%B1)
    - [단일 서버](#%EB%8B%A8%EC%9D%BC-%EC%84%9C%EB%B2%84)
    - [데이터베이스](#%EB%8D%B0%EC%9D%B4%ED%84%B0%EB%B2%A0%EC%9D%B4%EC%8A%A4)
    - [수직적 규모 확장 vs 수평적 규모 확장](#%EC%88%98%EC%A7%81%EC%A0%81-%EA%B7%9C%EB%AA%A8-%ED%99%95%EC%9E%A5-vs-%EC%88%98%ED%8F%89%EC%A0%81-%EA%B7%9C%EB%AA%A8-%ED%99%95%EC%9E%A5)
    - [캐시](#%EC%BA%90%EC%8B%9C)
    - [콘텐츠 전송 네트워크CDN](#%EC%BD%98%ED%85%90%EC%B8%A0-%EC%A0%84%EC%86%A1-%EB%84%A4%ED%8A%B8%EC%9B%8C%ED%81%ACcdn)
    - [무상태stateless 웹 계층](#%EB%AC%B4%EC%83%81%ED%83%9Cstateless-%EC%9B%B9-%EA%B3%84%EC%B8%B5)
    - [데이터 센터](#%EB%8D%B0%EC%9D%B4%ED%84%B0-%EC%84%BC%ED%84%B0)
    - [메시지 큐](#%EB%A9%94%EC%8B%9C%EC%A7%80-%ED%81%90)
    - [로그, 메트릭 그리고 자동화](#%EB%A1%9C%EA%B7%B8-%EB%A9%94%ED%8A%B8%EB%A6%AD-%EA%B7%B8%EB%A6%AC%EA%B3%A0-%EC%9E%90%EB%8F%99%ED%99%94)
    - [데이터베이스의 규모 확장](#%EB%8D%B0%EC%9D%B4%ED%84%B0%EB%B2%A0%EC%9D%B4%EC%8A%A4%EC%9D%98-%EA%B7%9C%EB%AA%A8-%ED%99%95%EC%9E%A5)
    - [백만 사용자, 그리고 그 이상](#%EB%B0%B1%EB%A7%8C-%EC%82%AC%EC%9A%A9%EC%9E%90-%EA%B7%B8%EB%A6%AC%EA%B3%A0-%EA%B7%B8-%EC%9D%B4%EC%83%81)

<!-- /TOC -->

<br>

> 이번 장을 통해, 규모 확장성과 관계된 설계 문제를 푸는데 쓰일 유용한 지식들을 마스터할 수 있을 것이다.


## 단일 서버

- 모든 컴포넌트가 단 한대의 서버에서 실행되는 간단한 시스템
    - 웹 앱, 데이터베이스, 캐시 등이 전부 서버 한대에서 실행된다.

<br>

## 데이터베이스

- 사용자가 늘면 서버 하나로는 부족해서 웹 서버와 데이터베이스 서버를 분리해야한다.
    - 어떤 DB 를 사용할 것인가?
        - 관계형 데이터베이스
        - 비-관계형 데이터베이스

<br>

## 수직적 규모 확장 vs 수평적 규모 확장

### 수직적 규모 확장
- 트래픽의 양이 적을 때 좋은 선택
- 단순하지만, 규모 확장에 한계가 있다.
- 장애에 대한 자동복구(failover)나 다중화(re-dundancy)가 어렵다.
    - 장애가 발생하면 서버 완전 중단

### 수평적 규모 확장
- 대규모 애플리케이션을 지원하는 데 적합
- 트래픽이 많을 때 부하 분산기 또는 로드밸런서를 도입하는 것이 가능하다.

#### 로드밸런서

- 부하 분산 집합에 속한 웹 서버들에게 트래픽 부하를 고르게 분산하는 역할
- 서버 간 통신에는 사설 IP 주소가 이용
- 장애 자동복구 문제 해소 + 웹 계층의 가용성 향상

#### 데이터베이스 다중화

- 서버 사이에 주(master)-부(slave) 관계를 설정하고 데이터 원본은 주 서버에, 사본은 부 서버에 저장하는 방식
- 쓰기 연산은 주 서버에서만 지원하고, 읽기 연산은 부 서버에서만 지원한다.
- 장애 발생시
    - 부 서버에 보관된 데이터가 최신 상태가 아닐 경우, 복구 스크립트를 돌려서 추가해야한다.
    - 다중 마스터나 원형 다중화 방식

<br>

## 캐시
> 응답 시간 개선 방법 1

## 콘텐츠 전송 네트워크(CDN)
> 응답 시간 개선 방법 2

<br>

## 무상태(stateless) 웹 계층

## 데이터 센터

## 메시지 큐

## 로그, 메트릭 그리고 자동화

## 데이터베이스의 규모 확장

## 백만 사용자, 그리고 그 이상
